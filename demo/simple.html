<!DOCTYPE html>
<html>

<head>
  <title>Simple demo</title>
  <script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>

  <!-- <script type="module" src="../add-event-listener.js"></script> -->
  <script type="module" src="../xtal-binder.js"></script>
  <script type="module" src="../observe-attributes.js"></script>
  <script type="module" src="https://cdn.jsdelivr.net/npm/xtal-fetch@0.0.25/xtal-fetch-get.js"></script>


</head>

<body>
  <link rel="import" href="../bower_components/vaadin-checkbox/vaadin-checkbox.html">

  <div>
    <!-- <add-event-listener on="click" dispatch event-name="hello" bubbles composed></add-event-listener>
    <add-event-listener on="click" if-matches="#test1" dispatch event-name="test1" bubbles composed></add-event-listener> -->
    <xtal-binder on="result-changed" if-matches="xtal-fetch-get" pass-to=".test{items:detail.value}" disabled-attribute-matcher="readyToFire"></xtal-binder>
    <button>Click to dispatch custom event</button>
    <button id="test1">Matching Test</button>
    <xtal-fetch-get fetch href="directory.json" as="json" disabled="readyToFire"></xtal-fetch-get>
    <div class="test">I am here</div>

    <div>
      <div>Observe console.log to see what happens when you toggle the vaadin-checkbox</div>
      <observe-attributes dispatch event-name="checkChange" bubbles composed filter='["checked"]'>
        <vaadin-checkbox></vaadin-checkbox>
      </observe-attributes>
    </div>
  </div>
  <script>
    document.body.addEventListener('hello', e => {
      alert('received hello message');
    })
    document.body.addEventListener('test1', e => {
      alert('received test1 message');
    })
    document.body.addEventListener('checkChange', e => {
      console.log(e);
      var newDiv = document.createElement('div');
      newDiv.innerHTML = "<span>iah</span><ul><li class='test'>1</li><li>2</li?</ul>";
      e.target.parentElement.appendChild(newDiv);
    })
  </script>
</body>

</html>