import{XtalCustomEvent,registerTagName}from"./custom-event.js";var defaultTagName_xtal_in_attributes="observe-attributes",canonicalTagName_xtal_in_attributes="xtal-in-attributes",filter="filter",ObserveAttributes=function(_XtalCustomEvent){babelHelpers.inherits(ObserveAttributes,_XtalCustomEvent);function ObserveAttributes(){babelHelpers.classCallCheck(this,ObserveAttributes);return babelHelpers.possibleConstructorReturn(this,(ObserveAttributes.__proto__||Object.getPrototypeOf(ObserveAttributes)).apply(this,arguments))}babelHelpers.createClass(ObserveAttributes,[{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){babelHelpers.get(ObserveAttributes.prototype.__proto__||Object.getPrototypeOf(ObserveAttributes.prototype),"attributeChangedCallback",this).call(this,name,oldValue,newValue);switch(name){case filter:this._filter=JSON.parse(newValue);break;}}},{key:"getValues",value:function getValues(attributes){var _this=this,attribs={};attributes.forEach(function(attrib){attribs[attrib]=_this._child[attrib]});return attribs}},{key:"addMutationObserver",value:function addMutationObserver(){var _this2=this;this.disconnect();if(!this._child)return;var config={attributes:!0,attributeFilter:this._filter};this._observer=new MutationObserver(function(mutationsList){mutationsList.forEach(function(mutation){_this2.detail={mutation:mutation}});var attribs=_this2.filter?_this2.getValues(_this2.filter):_this2._child.attributes;_this2.setResult(attribs,null)});this._observer.observe(this._child,config)}},{key:"getChild",value:function getChild(){var _this3=this;switch(this.childElementCount){case 0:setTimeout(function(){_this3.getChild()},100);return;case 1:this._child=this.firstElementChild;this.addMutationObserver();break;default:console.error("This component only supports a single element child");}}},{key:"disconnect",value:function disconnect(){if(this._observer)this._observer.disconnect()}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(ObserveAttributes.prototype.__proto__||Object.getPrototypeOf(ObserveAttributes.prototype),"connectedCallback",this).call(this);this._upgradeProperties([filter]);this.getChild()}},{key:"filter",get:function get(){return this._filter},set:function set(val){this.setAttribute(filter,JSON.stringify(val))}}],[{key:"observedAttributes",get:function get(){return babelHelpers.get(ObserveAttributes.__proto__||Object.getPrototypeOf(ObserveAttributes),"observedAttributes",this).concat([filter])}}]);return ObserveAttributes}(XtalCustomEvent);registerTagName(defaultTagName_xtal_in_attributes,ObserveAttributes);var XtalInAttributes=function(_ObserveAttributes){babelHelpers.inherits(XtalInAttributes,_ObserveAttributes);function XtalInAttributes(){babelHelpers.classCallCheck(this,XtalInAttributes);return babelHelpers.possibleConstructorReturn(this,(XtalInAttributes.__proto__||Object.getPrototypeOf(XtalInAttributes)).apply(this,arguments))}return XtalInAttributes}(ObserveAttributes);customElements.define(canonicalTagName_xtal_in_attributes,XtalInAttributes);