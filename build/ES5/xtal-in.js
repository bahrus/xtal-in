(function(){function a(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function later(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}}function b(a,b){var c=a,d=document.head.querySelector("[data-was=\"".concat(a,"\"][data-package=\"npm.xtal-in\"]"));if(d){var e=d.dataset.is;e&&(c=e)}customElements.get(c)||customElements.define(c,b)}function c(a,c){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){b(a,c)}):b(a,c)}var d="xtal-in-detail",e="bubbles",f="composed",g="dispatch",h="detail",i="event-name",j="debounce-duration",k="zoom-in",l="zoom-out";var m=function(b){function c(){var a;return babelHelpers.classCallCheck(this,c),a=babelHelpers.possibleConstructorReturn(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments)),a._debounceDuration=0,a}return babelHelpers.inherits(c,b),babelHelpers.createClass(c,[{key:"zoomInObject",value:function zoomInObject(a){if(!this.zoomIn)return a;for(var b,c=a,d=this.zoomIn.split("."),e=0,f=d.length;e<f;e++)if(b=d[e],c=c[b],!c)return null;return c}},{key:"zoomOutObject",value:function zoomOutObject(a){if(!this.zoomOut)return a;var b=a;return this.zoomOut.split(".").forEach(function(){b={token:b}}),b}},{key:"zoom",value:function zoom(a){return null===a?a:this.zoomInObject(this.zoomOutObject(a))}},{key:"setValue",value:function setValue(a){this._value=a;var b=new CustomEvent("value-changed",{detail:{value:a},bubbles:!0,composed:!1});this.dispatchEvent(b)}},{key:"onPropsChange",value:function onPropsChange(){this._dispatch&&this._detail&&this.eventName&&(this._debounceFunction?this._debounceFunction():this.emitEvent())}},{key:"emitEvent",value:function emitEvent(){var a=new CustomEvent(this.eventName,{detail:this._zoomedDetail,bubbles:this.bubbles,composed:this.composed});this.dispatchEvent(a),this._isSubClass||this.setValue(a.detail)}},{key:"_upgradeProperties",value:function _upgradeProperties(a){var b=this;a.forEach(function(a){if(b.hasOwnProperty(a)){var c=b[a];delete b[a],b[a]=c}})}},{key:"snakeToCamel",value:function snakeToCamel(a){return a.replace(/(\-\w)/g,function(a){return a[1].toUpperCase()})}},{key:"connectedCallback",value:function connectedCallback(){var a=this;this._upgradeProperties(c.observedAttributes.map(function(b){return a.snakeToCamel(b)}))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(b,c,d){var i=this;b===e||b===g||b===f?this["_"+this.snakeToCamel(b)]=null!==d:b===h?this._detail=this.zoom(JSON.parse(d)):b===j?(this._debounceDuration=parseFloat(d),0<this._debounceDuration&&(this._debounceFunction=a(function(){i.emitEvent()},this._debounceDuration))):void 0,this.onPropsChange()}},{key:"bubbles",get:function get(){return this._bubbles},set:function set(a){a?this.setAttribute(e,""):this.removeAttribute(e)}},{key:"composed",get:function get(){return this._composed},set:function set(a){a?this.setAttribute(f,""):this.removeAttribute(f)}},{key:"dispatch",get:function get(){return this._dispatch},set:function set(a){a?this.setAttribute(g,""):this.removeAttribute(g)}},{key:"detail",get:function get(){return this._detail},set:function set(a){this._detail=a,this._zoomedDetail=this.zoom(this._detail),this.onPropsChange()}},{key:"debounceDuration",get:function get(){return this._debounceDuration},set:function set(a){this.setAttribute(j,a.toString())}},{key:"eventName",get:function get(){return this.getAttribute(i)},set:function set(a){this.setAttribute(i,a)}},{key:"zoomIn",get:function get(){return this.getAttribute(k)},set:function set(a){this.setAttribute(k,a)}},{key:"zoomOut",get:function get(){return this.getAttribute(l)},set:function set(a){this.setAttribute(l,a)}},{key:"value",get:function get(){return this._value}}],[{key:"observedAttributes",get:function get(){return[e,f,g,h,i,j,k,l]}}]),c}(babelHelpers.wrapNativeSuper(HTMLElement));if(!customElements.get(d)){c("custom-event",m);var z=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(m);customElements.define(d,z)}var n="filter",o=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"attributeChangedCallback",value:function attributeChangedCallback(a,c,d){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"attributeChangedCallback",this).call(this,a,c,d),a===n?this._filter=JSON.parse(d):void 0}},{key:"getValues",value:function getValues(a){var b=this,c={};return a.forEach(function(a){c[a]=b._child[a]}),c}},{key:"addMutationObserver",value:function addMutationObserver(){var a=this;if(this.disconnect(),!!this._child){var b={attributes:!0,attributeFilter:this._filter};this._observer=new MutationObserver(function(b){b.forEach(function(b){a.detail={mutation:b}});var c=a.filter?a.getValues(a.filter):a._child.attributes;a.setValue(c)}),this._observer.observe(this._child,b)}}},{key:"getChild",value:function getChild(){var a=this;switch(this.childElementCount){case 0:return void setTimeout(function(){a.getChild()},100);case 1:this._child=this.firstElementChild,this.addMutationObserver();break;default:console.error("This component only supports a single element child");}}},{key:"disconnect",value:function disconnect(){this._observer&&this._observer.disconnect()}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this._upgradeProperties([n]),this.getChild()}},{key:"filter",get:function get(){return this._filter},set:function set(a){this.setAttribute(n,JSON.stringify(a))}}],[{key:"observedAttributes",get:function get(){return babelHelpers.get(b.__proto__||Object.getPrototypeOf(b),"observedAttributes",this).concat([n])}}]),b}(m);c("observe-attributes",o);var p=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(o);customElements.define("xtal-in-attributes",p);var q="watch-subtree",r=function(a){function b(){var a;return babelHelpers.classCallCheck(this,b),a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),a._mutationCount=0,a._isSubClass=!0,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"attributeChangedCallback",value:function attributeChangedCallback(a,c,d){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"attributeChangedCallback",this).call(this,a,c,d),a===q?(this._watchSubtree=null!==d,this.disconnect(),this.addMutationObserver()):void 0}},{key:"disconnect",value:function disconnect(){this._observer&&this._observer.disconnect()}},{key:"addMutationObserver",value:function addMutationObserver(){var a=this,b={childList:!0,subtree:this._watchSubtree};this._observer=new MutationObserver(function(b){b.forEach(function(b){a.detail={mutation:b}}),a._mutationCount++,a.setValue(a._mutationCount)}),this.detail={status:"observing"},this.setValue(this._mutationCount),this._observer.observe(this,b)}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this.addMutationObserver()}},{key:"disconnedCallback",value:function disconnedCallback(){this.disconnect()}},{key:"watchSubtree",get:function get(){return this._watchSubtree},set:function set(a){a?this.setAttribute(q,""):this.removeAttribute(q)}}],[{key:"observedAttributes",get:function get(){return babelHelpers.get(b.__proto__||Object.getPrototypeOf(b),"observedAttributes",this).concat([q])}}]),b}(m);c("observe-children",r);var s=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(r);customElements.define("xtal-in-children",s);var t="on",u="if-matches",v="value-props",w="cascade-down",x="xtal-in-curry",y=function(a){function b(){var a;return babelHelpers.classCallCheck(this,b),a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),a._isSubClass=!0,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"attributeChangedCallback",value:function attributeChangedCallback(a,c,d){switch(babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"attributeChangedCallback",this).call(this,a,c,d),a){case"stop-propagation":this._stopPropagation=null!==d;break;case v:this._valueProps=null===d?null:d.startsWith("[")?JSON.parse(d):d;case u:this._ifMatches=d;break;case w:this.propagateDown();break;case t:this._on=d;var e=this.parentElement,f=e[x];if(this._on){f||(f=e[x]={});var g=f[this._on];g||(g=f[this._on]=[],this.parentElement.addEventListener(this._on,this.handleEvent)),g.push(this)}else this.disconnect();}}},{key:"modifyEvent",value:function modifyEvent(a,b){b.stopPropagation&&a.stopPropagation()}},{key:"propagateDown",value:function propagateDown(){var a=this;if(this.eventName)for(var b=this.eventName+"-props",c=this.parentElement.querySelectorAll("["+b+"]"),d=function(d){var e=c[d],f=e.getAttribute(b).split(",");f.forEach(function(b){e[b]=a.value})},e=0,f=c.length;e<f;e++)d(e,f)}},{key:"handleEvent",value:function handleEvent(a){var b=this,c=this["xtal-in-curry"][a.type];c.forEach(function(c){var d=a.target;if(!c._ifMatches||d.matches(c._ifMatches)){if(c.modifyEvent(a,c),b._valueProps){var f,g=!1;Array.isArray(b._valueProps)?(g=!0,f={},b._valueProps.forEach(function(a){f[a]=d[a]})):f=d[b._valueProps];var h={};c._zoomedDetail&&(h.context=c._zoomedDetail),f&&(g?h.values=f:h.value=f),c.detail=h}else c.detail=c._zoomedDetail;var e=Object.assign({},c.detail);c.setValue(e),c.cascadeDown&&c.propagateDown()}})}},{key:"removeElement",value:function removeElement(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}},{key:"disconnect",value:function disconnect(){var a=this.parentElement,b=a[x],c=b[this._on];this.removeElement(c,this),0===c.length&&this.parentElement.removeEventListener(this._on,this.handleEvent)}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this._upgradeProperties(["on","stopPropagation","valueProps"])}},{key:"disconnectedCallback",value:function disconnectedCallback(){this.disconnect()}},{key:"stopPropagation",get:function get(){return this._stopPropagation},set:function set(a){a?this.setAttribute("stop-propagation",""):this.removeAttribute("stop-propagation")}},{key:"on",get:function get(){return this._on},set:function set(a){this.setAttribute(t,a)}},{key:"ifMatches",get:function get(){return this._ifMatches},set:function set(a){this.setAttribute(u,a)}},{key:"valueProps",get:function get(){return this._valueProps},set:function set(a){this.setAttribute(v,a.toString())}},{key:"cascadeDown",get:function get(){return this.getAttribute(w)},set:function set(a){this.setAttribute(w,a)}}],[{key:"observedAttributes",get:function get(){return babelHelpers.get(b.__proto__||Object.getPrototypeOf(b),"observedAttributes",this).concat(["stop-propagation",t,u,v,w])}}]),b}(m);if(!customElements.get(x)){c("add-event-listener",y);var A=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(y);customElements.define(x,A)}})();