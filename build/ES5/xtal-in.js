var xtal;(function(a){var b;(function(){var a=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'getHost',value:function(){for(var a=this.parentElement;a;){if(a.shadowRoot)return a;a=a.parentElement}}},{key:'getTarget',value:function(a){return a?'_self'===a?this:'_parent'===a?this.parentElement:'_host'===a?this.getHost():void 0:null}},{key:'attributeChangedCallback',value:function(a,b,c){switch(a){case'bubbles':this.bubbles=null!==c;break;case'composed':this.composed=null!==c;break;case'debounce-duration':this.debounceDuration=parseInt(c);case'dispatch':this.dispatch=null!==c,this.dispatch&&(this.onWhenClickChange(),this.onWhenInputChange());break;case'event-name':this.eventName=c;break;case'file-name':this.fileName=c;break;case'href':this.href=c;break;case'stop-propagation':this.stopPropagation=null!==c;break;case'when-click':this.whenClick=null!==c,this.onWhenClickChange();break;case'when-input':this.whenInput=null!==c,this.onWhenInputChange();}}},{key:'changeTarget',value:function(){this.removeAllEventListeners()}},{key:'removeAllEventListeners',value:function(){this.removeEventListener('click',this.handleClick),this.removeEventListener('input',this.handleInput)}},{key:'connectAllEventListeners',value:function(){var a=this;this.onWhenClickChange(),this.onWhenInputChange();var b=this.getTarget(this.whenClickOn);b&&b.addEventListener('click',this.handleClick);var c=this.getTarget(this.whenInputtingOn);c&&c.addEventListener('input',this.handleInput);var d=this.getTarget(this.whenAttributeMutates);if(d){this._mutationObserver=new MutationObserver(function(b){b.forEach(function(b){var c={attributeName:b.attributeName,attributeValue:d.getAttribute(b.attributeName)},e=(d.id||'')+'-';e+=b.attributeName+'-changed',a.emitEvent(c,e)})});this._mutationObserver.observe(d,{attributes:!0})}}},{key:'disconnectedCallback',value:function(){this.removeAllEventListeners(),this._mutationObserver.disconnect()}},{key:'onWhenClickChange',value:function(){this.dispatch&&(this.whenClick?this.addEventListener('click',this.handleClick):this.removeEventListener('click',this.handleClick))}},{key:'debounce',value:function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}}},{key:'onWhenInputChange',value:function(){if(this.dispatch)if(!this.whenInput)0<this.debounceDuration?this.removeEventListener('input',this.__inputDebouncer):this.removeEventListener('input',this.handleInput);else if(0<this.debounceDuration){if(!this.__inputDebouncer){var a=this;this.__inputDebouncer=this.debounce(function(){a.handleInput()},this.debounceDuration)}this.addEventListener('input',this.__inputDebouncer)}else this.addEventListener('input',this.handleInput)}},{key:'getEventName',value:function(){switch(this.eventName){case'${this.fileName}':return this.fileName;case'${this.resolvedUrl}':return this.resolvedUrl;default:return this.eventName;}}},{key:'emitEvent',value:function(a,b){if(a||(a={}),this.eventDetail)for(var c in this.eventDetail)a[c]=this.eventDetail[c];var d=this.getEventName();d||(d=b);var e=new CustomEvent(d,{detail:a,bubbles:this.bubbles,composed:this.composed});this.dispatchEvent(e)}},{key:'handleClick',value:function(){this.stopPropagation&&event.stopPropagation();this.emitEvent({},null)}},{key:'handleInput',value:function(){this.stopPropagation&&event.stopPropagation();var a=event.srcElement,b={name:a.name,value:a.value};this.emitEvent(b,null)}},{key:'computeFileName',value:function(a){var b=a.split('/').pop();return b.substr(0,b.lastIndexOf('.'))}},{key:'whenClickOn',set:function(a){this.setAttribute('when-click-on',a)}},{key:'whenInputtingOn',set:function(a){this.setAttribute('when-inputting-on',a)}},{key:'whenAttributeMutates',set:function(a){this.setAttribute('when-attribute-mutates',a)}},{key:'eventDetail',set:function(a){this._eventDetail=a}},{key:'resolvedUrl',get:function(){return this.resolvedUrl(this.href)}}],[{key:'is',get:function(){return'xtal-in'}},{key:'observedAttributes',get:function(){return['bubbles','composed','debounce-duration','dispatch','event-name','file-name','href','stop-propagation','when-click','when-input','when-clicking-on','when-inputting-on']}}]),b}(HTMLElement);customElements.define(a.is,a)})(b=a.elements||(a.elements={}))})(xtal||(xtal={}));