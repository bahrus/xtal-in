var defaultTagName="custom-event",canonicalTagName="xtal-in-detail",bubbles="bubbles",composed="composed",dispatch="dispatch",disabled="disabled",detail="detail",event_name="event-name",debounce_duration="debounce-duration",zoom_in="zoom-in",zoom_out="zoom-out";export function debounce(func,wait,immediate){var timeout;return function(){var context=this,args=arguments,callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(function later(){timeout=null;if(!immediate)func.apply(context,args)},wait);if(callNow)func.apply(context,args)}}export var XtalCustomEvent=function(_HTMLElement){babelHelpers.inherits(XtalCustomEvent,_HTMLElement);function XtalCustomEvent(){var _this;babelHelpers.classCallCheck(this,XtalCustomEvent);_this=babelHelpers.possibleConstructorReturn(this,(XtalCustomEvent.__proto__||Object.getPrototypeOf(XtalCustomEvent)).apply(this,arguments));_this._debounceDuration=0;return _this}babelHelpers.createClass(XtalCustomEvent,[{key:"zoomInObject",value:function zoomInObject(obj){if(!this.zoomIn)return obj;for(var returnObj=obj,split=this.zoomIn.split("."),i=0,ii=split.length,selector;i<ii;i++){selector=split[i];returnObj=returnObj[selector];if(!returnObj)return null}return returnObj}},{key:"zoomOutObject",value:function zoomOutObject(obj){if(!this.zoomOut)return obj;var returnObj=obj;this.zoomOut.split(".").forEach(function(){returnObj={token:returnObj}});return returnObj}},{key:"zoom",value:function zoom(obj){if(null===obj)return obj;return this.zoomInObject(this.zoomOutObject(obj))}},{key:"setResult",value:function setResult(val){this._result=val;var newEvent=new CustomEvent("result-changed",{detail:{value:val},bubbles:!0,composed:!1});this.dispatchEvent(newEvent)}},{key:"onPropsChange",value:function onPropsChange(){if(!this._dispatch||!this._detail||!this.eventName||this.disabled)return;if(this._debounceFunction){this._debounceFunction()}else{this.emitEvent()}}},{key:"emitEvent",value:function emitEvent(){var newEvent=new CustomEvent(this.eventName,{detail:this._zoomedDetail,bubbles:this.bubbles,composed:this.composed});this.dispatchEvent(newEvent);if(!this._isSubClass&&newEvent.detail){this.setResult(newEvent.detail.value,newEvent)}}},{key:"_upgradeProperties",value:function _upgradeProperties(props){var _this2=this;props.forEach(function(prop){if(_this2.hasOwnProperty(prop)){var value=_this2[prop];delete _this2[prop];_this2[prop]=value}})}},{key:"connectedCallback",value:function connectedCallback(){this._upgradeProperties(XtalCustomEvent.observedAttributes.map(function(attrib){return snakeToCamel(attrib)}))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(name,oldValue,newValue){var _this3=this;switch(name){case bubbles:case dispatch:case composed:case disabled:this["_"+snakeToCamel(name)]=null!==newValue;break;case detail:this._detail=this.zoom(JSON.parse(newValue));break;case debounce_duration:this._debounceDuration=parseFloat(newValue);if(0<this._debounceDuration){this._debounceFunction=debounce(function(){_this3.emitEvent()},this._debounceDuration)}break;}this.onPropsChange()}},{key:"bubbles",get:function get(){return this._bubbles},set:function set(val){if(val){this.setAttribute(bubbles,"")}else{this.removeAttribute(bubbles)}}},{key:"composed",get:function get(){return this._composed},set:function set(val){if(val){this.setAttribute(composed,"")}else{this.removeAttribute(composed)}}},{key:"disabled",get:function get(){return this._disabled||this.hasAttribute(disabled)},set:function set(val){if(val){this.setAttribute(disabled,"")}else{this.removeAttribute(disabled)}}},{key:"dispatch",get:function get(){return this._dispatch},set:function set(val){if(val){this.setAttribute(dispatch,"")}else{this.removeAttribute(dispatch)}}},{key:"detail",get:function get(){return this._detail},set:function set(val){this._detail=val;this._zoomedDetail=this.zoom(this._detail);this.onPropsChange()}},{key:"debounceDuration",get:function get(){return this._debounceDuration},set:function set(val){this.setAttribute(debounce_duration,val.toString())}},{key:"eventName",get:function get(){return this.getAttribute(event_name)},set:function set(val){this.setAttribute(event_name,val)}},{key:"zoomIn",get:function get(){return this.getAttribute(zoom_in)},set:function set(val){this.setAttribute(zoom_in,val)}},{key:"zoomOut",get:function get(){return this.getAttribute(zoom_out)},set:function set(val){this.setAttribute(zoom_out,val)}},{key:"result",get:function get(){return this._result}}],[{key:"observedAttributes",get:function get(){return[bubbles,composed,dispatch,detail,event_name,debounce_duration,zoom_in,zoom_out]}}]);return XtalCustomEvent}(HTMLElement);export function registerTagName(defaultTagName,cls){var h=document.head;if(!h)return;var scTagName="xtalIn"+snakeToCamel(defaultTagName)+"Alias",tagName=defaultTagName,alias=h.dataset[scTagName];if(alias){tagName=alias}customElements.define(tagName,cls)}export function snakeToCamel(s){return s.replace(/(\-\w)/g,function(m){return m[1].toUpperCase()})}if(!customElements.get(canonicalTagName)){registerTagName(defaultTagName,XtalCustomEvent);var XtalInDetail=function(_XtalCustomEvent){babelHelpers.inherits(XtalInDetail,_XtalCustomEvent);function XtalInDetail(){babelHelpers.classCallCheck(this,XtalInDetail);return babelHelpers.possibleConstructorReturn(this,(XtalInDetail.__proto__||Object.getPrototypeOf(XtalInDetail)).apply(this,arguments))}return XtalInDetail}(XtalCustomEvent);customElements.define(canonicalTagName,XtalInDetail)}