import{XtalCustomEvent,registerTagName}from"./custom-event.js";var stopPropagation="stop-propagation",on="on",ifMatches="if-matches",valueProps="value-props",disabledAttributeMatcher="disabled-attribute-matcher",defaultTagName_addEventListener="add-event-listener",canonicalTagName_XtalInCurry="xtal-in-curry";export var AddEventListener=function(a){function b(){var a;return babelHelpers.classCallCheck(this,b),a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this)),a._isSubClass=!0,a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"set",value:function set(a){a?this.setAttribute(disabledAttributeMatcher,""):this.removeAttribute(disabledAttributeMatcher)}},{key:"qsa",value:function qsa(a,b){return[].slice.call((b?b:this).querySelectorAll(a))}},{key:"attributeChangedCallback",value:function attributeChangedCallback(a,c,d){var e=this;switch(a){case"stop-propagation":this._stopPropagation=null!==d;break;case valueProps:this._valueProps=d;case ifMatches:this._ifMatches=d;break;case disabledAttributeMatcher:this._disabledAttributeMatcher=null!==d;case on:this._on=d;var f=this.parentElement,g=f[canonicalTagName_XtalInCurry];if(this._on){g||(g=f[canonicalTagName_XtalInCurry]={});var h=g[this._on];h||(h=g[this._on]=[],this.parentElement.addEventListener(this._on,this.handleEvent)),h.push(this),this.enableElements(),"loading"===document.readyState&&document.addEventListener("DOMContentLoaded",function(){e.enableElements()})}else this.disconnect();}babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"attributeChangedCallback",this).call(this,a,c,d)}},{key:"enableElements",value:function enableElements(){if(this.disabledAttributeMatcher){if(this.setAttribute("attached",""),0<this.qsa(":not(attached)[".concat(this.disabledAttributeMatcher,"]"),this.parentElement).length)return;this.qsa("[disabled=\"".concat(this.disabledAttributeMatcher,"\"]"),this.parentElement).forEach(function(a){a.removeAttribute("disabled")})}}},{key:"modifyEvent",value:function modifyEvent(a,b){b.stopPropagation&&a.stopPropagation()}},{key:"handleEvent",value:function handleEvent(a){var b=this,c=this["xtal-in-curry"][a.type];c.forEach(function(c){var d=a.target;if(!c.ifMatches||d.matches(c.ifMatches)){if(c.modifyEvent(a,c),b.valueProps){var f,g=!1;if(-1<b.valueProps.indexOf(",")){g=!0,f={};var h=b.valueProps.split(",");h.forEach(function(a){f[a]=d[a]})}else f=d[b._valueProps];var i={};f?(g?i.values=f:i.value=f,i.context=a.detail):Object.assign(i,a.detail),c.detail=i}else c.detail=Object.assign({},a.detail);var e=Object.assign({},c.detail);c.setValue(e,a)}})}},{key:"removeElement",value:function removeElement(a,b){var c=a.indexOf(b);-1!==c&&a.splice(c,1)}},{key:"disconnect",value:function disconnect(){var a=this.parentElement,b=a[canonicalTagName_XtalInCurry],c=b[this._on];this.removeElement(c,this),0===c.length&&this.parentElement.removeEventListener(this._on,this.handleEvent)}},{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"connectedCallback",this).call(this),this._upgradeProperties(["on","stopPropagation","valueProps"])}},{key:"disconnectedCallback",value:function disconnectedCallback(){this.disconnect()}},{key:"stopPropagation",get:function get(){return this._stopPropagation||this.hasAttribute("stop-propagation")},set:function set(a){a?this.setAttribute("stop-propagation",""):this.removeAttribute("stop-propagation")}},{key:"disabledAttributeMatcher",get:function get(){return this._disabledAttributeMatcher||this.getAttribute(disabledAttributeMatcher)}},{key:"on",get:function get(){return this._on},set:function set(a){this.setAttribute(on,a)}},{key:"ifMatches",get:function get(){return this._ifMatches||this.getAttribute(ifMatches)},set:function set(a){this.setAttribute(ifMatches,a)}},{key:"valueProps",get:function get(){return this._valueProps||this.getAttribute(valueProps)},set:function set(a){this.setAttribute(valueProps,a.toString())}}],[{key:"observedAttributes",get:function get(){return babelHelpers.get(b.__proto__||Object.getPrototypeOf(b),"observedAttributes",this).concat(["stop-propagation",on,ifMatches,valueProps,disabledAttributeMatcher])}}]),b}(XtalCustomEvent);if(!customElements.get(canonicalTagName_XtalInCurry)){registerTagName(defaultTagName_addEventListener,AddEventListener);var XtalInCurry=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),b}(AddEventListener);customElements.define(canonicalTagName_XtalInCurry,XtalInCurry)}