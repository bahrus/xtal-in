var xtal;(function(a){var b;(function(){class a extends HTMLElement{getHost(){for(let a=this.parentElement;a;){if(a.shadowRoot)return a;a=a.parentElement}}getTarget(a){if(!a)return null;return'_self'===a?this:'_parent'===a?this.parentElement:'_host'===a?this.getHost():void 0}set whenClickOn(a){this.setAttribute('when-click-on',a)}set whenInputtingOn(a){this.setAttribute('when-inputting-on',a)}set whenAttributeMutates(a){this.setAttribute('when-attribute-mutates',a)}set eventDetail(a){this._eventDetail=a}static get is(){return'xtal-in'}static get observedAttributes(){return['bubbles','composed','debounce-duration','dispatch','event-name','file-name','href','stop-propagation','when-click','when-input','when-clicking-on','when-inputting-on']}attributeChangedCallback(a,b,c){switch(a){case'bubbles':this.bubbles=null!==c;break;case'composed':this.composed=null!==c;break;case'debounce-duration':this.debounceDuration=parseInt(c);case'dispatch':this.dispatch=null!==c,this.dispatch&&(this.onWhenClickChange(),this.onWhenInputChange());break;case'event-name':this.eventName=c;break;case'file-name':this.fileName=c;break;case'href':this.href=c;break;case'stop-propagation':this.stopPropagation=null!==c;break;case'when-click':this.whenClick=null!==c,this.onWhenClickChange();break;case'when-input':this.whenInput=null!==c,this.onWhenInputChange();}}changeTarget(){this.removeAllEventListeners()}removeAllEventListeners(){this.removeEventListener('click',this.handleClick),this.removeEventListener('input',this.handleInput)}connectAllEventListeners(){this.onWhenClickChange(),this.onWhenInputChange();const a=this.getTarget(this.whenClickOn);a&&a.addEventListener('click',this.handleClick);const b=this.getTarget(this.whenInputtingOn);b&&b.addEventListener('input',this.handleInput);const c=this.getTarget(this.whenAttributeMutates);if(c){this._mutationObserver=new MutationObserver((a)=>{a.forEach((a)=>{const b={attributeName:a.attributeName,attributeValue:c.getAttribute(a.attributeName)};let d=(c.id||'')+'-';d+=a.attributeName+'-changed',this.emitEvent(b,d)})});this._mutationObserver.observe(c,{attributes:!0})}}disconnectedCallback(){this.removeAllEventListeners(),this._mutationObserver.disconnect()}onWhenClickChange(){this.dispatch&&(this.whenClick?this.addEventListener('click',this.handleClick):this.removeEventListener('click',this.handleClick))}get resolvedUrl(){return this.resolvedUrl(this.href)}debounce(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}}onWhenInputChange(){if(this.dispatch)if(!this.whenInput)0<this.debounceDuration?this.removeEventListener('input',this.__inputDebouncer):this.removeEventListener('input',this.handleInput);else if(0<this.debounceDuration){if(!this.__inputDebouncer){const a=this;this.__inputDebouncer=this.debounce(()=>{a.handleInput()},this.debounceDuration)}this.addEventListener('input',this.__inputDebouncer)}else this.addEventListener('input',this.handleInput)}getEventName(){switch(this.eventName){case'${this.fileName}':return this.fileName;case'${this.resolvedUrl}':return this.resolvedUrl;default:return this.eventName;}}emitEvent(a,b){if(a||(a={}),this.eventDetail)for(let b in this.eventDetail)a[b]=this.eventDetail[b];let c=this.getEventName();c||(c=b);const d=new CustomEvent(c,{detail:a,bubbles:this.bubbles,composed:this.composed});this.dispatchEvent(d)}handleClick(){this.stopPropagation&&event.stopPropagation();this.emitEvent({},null)}handleInput(){this.stopPropagation&&event.stopPropagation();const a=event.srcElement,b={name:a.name,value:a.value};this.emitEvent(b,null)}computeFileName(a){const b=a.split('/').pop();return b.substr(0,b.lastIndexOf('.'))}}customElements.define(a.is,a)})(b=a.elements||(a.elements={}))})(xtal||(xtal={}));