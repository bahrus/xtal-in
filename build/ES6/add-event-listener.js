import{XtalInDetail,registerTagName}from'./xtal-in-detail.js';const stopPropagation='stop-propagation',on='on',ifMatches='if-matches',defaultTagName='add-event-listener',canonicalTagName='xtal-in-curry';class AddEventListener extends XtalInDetail{get detailFn(){return this._detailFn}set detailFn(a){this._detailFn=a}get stopPropagation(){return this._stopPropagation}set stopPropagation(a){a?this.setAttribute(stopPropagation,''):this.removeAttribute(stopPropagation)}get on(){return this._on}set on(a){this.setAttribute(on,a)}get ifMatches(){return this._ifMatches}set ifMatches(a){this.setAttribute(ifMatches,a)}static get observedAttributes(){return super.observedAttributes.concat([stopPropagation,on,ifMatches])}attributeChangedCallback(a,b,c){switch(super.attributeChangedCallback(a,b,c),a){case stopPropagation:this._stopPropagation=null!==c;break;case ifMatches:this._ifMatches=c;break;case on:this._on=c;const d=this.parentElement;let e=d[canonicalTagName];if(this._on){e||(e=d[canonicalTagName]={});let a=e[this._on];a||(a=e[this._on]=[],this.parentElement.addEventListener(this._on,this.handleEvent)),a.push(this)}else this.disconnect();}}handleEvent(a){const b=this['xtal-in-curry'][a.type];b.forEach((b)=>{b._ifMatches&&!a.target.matches(b._ifMatches)||(b.stopPropagation&&a.stopPropagation(),b.detail=b.detailFn?b.detailFn(a,this):{})})}disconnect(){this.parentElement.removeEventListener(this._on,this.handleEvent)}connectedCallback(){super.connectedCallback(),this._upgradeProperties(['on','stopPropagation','detailFn'])}disconnectedCallback(){super.connectedCallback(),this.disconnect()}}registerTagName(defaultTagName,AddEventListener);class XtalInCurry extends AddEventListener{}customElements.define(canonicalTagName,XtalInCurry);